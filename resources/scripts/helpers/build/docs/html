#!/bin/sh -e
#
# Libreboot documentation build script: html-by-node
#
# Note: currently the manual generated by this script does
# not display images correctly
#
# './build docs html' is short for ./build docs html-by-node
# name the output accordingly for clarity

echo "@set docsdir ../../" > docs/constants.texi

basefile="`basename "$0"`-by-node"
basedir="docs/manual/"
outdir="${basedir}libreboot_${basefile}"
texinfo_src="docs/libreboot.texi"

[ -d docs/manual ] || mkdir docs/manual

echo "Writing manual: $outdir..."
makeinfo --html --no-warn --split=node -o $outdir $texinfo_src

echo "Making $outdir.tar.gz..."
tar -czf $outdir.tar.gz $outdir

echo "Done."
