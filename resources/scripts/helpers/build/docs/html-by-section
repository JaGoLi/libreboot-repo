#!/bin/sh -e
#
# Libreboot documentation build script: html-by-section
#
# Note: currently the manual generated by this script does
# not display images correctly
#

echo "@set docsdir ../../" > docs/constants.texi

basefile=`basename "$0"`
basedir="docs/manual/"
outdir="${basedir}libreboot_${basefile}"
texinfo_src="docs/libreboot.texi"

[ -d docs/manual ] || mkdir docs/manual

echo "Writing manual: $outdir..."
makeinfo --html --no-warn --split=section -o $outdir $texinfo_src

echo "Making $outdir.tar.gz..."
tar -czf $outdir.tar.gz $outdir

echo "Done."
