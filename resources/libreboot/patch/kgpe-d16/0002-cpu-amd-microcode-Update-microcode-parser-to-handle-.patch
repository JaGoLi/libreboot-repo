From f65e4abec63a8ec3bfb5a784cecb7405c463c038 Mon Sep 17 00:00:00 2001
From: Timothy Pearson <kb9vqf@pearsoncomputing.net>
Date: Tue, 11 Aug 2015 19:14:34 -0500
Subject: [PATCH 002/146] cpu/amd/microcode: Update microcode parser to handle
 expanded blob files

---
 src/cpu/amd/microcode/microcode.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/cpu/amd/microcode/microcode.c b/src/cpu/amd/microcode/microcode.c
index 45e4bf0..ce5b08f 100644
--- a/src/cpu/amd/microcode/microcode.c
+++ b/src/cpu/amd/microcode/microcode.c
@@ -2,6 +2,7 @@
  * This file is part of the coreboot project.
  *
  * Copyright (C) 2007 Advanced Micro Devices, Inc.
+ * Copyright (C) 2015 Timothy Pearson <tpearson@raptorengineeringinc.com>, Raptor Engineering
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License as published by
@@ -83,13 +84,13 @@ static void amd_update_microcode(const void *ucode,  size_t ucode_len,
 	const uint8_t *c = ucode;
 	const uint8_t *ucode_end = (uint8_t*)ucode + ucode_len;
 
-	while (c <= (ucode_end - 2048)) {
+	while (c <= (ucode_end - 4096)) {
 		m = (struct microcode *)c;
 		if (m->processor_rev_id == equivalent_processor_rev_id) {
 			apply_microcode_patch(m);
 			break;
 		}
-		c += 2048;
+		c += 4096;
 	}
 }
 
-- 
1.7.9.5

