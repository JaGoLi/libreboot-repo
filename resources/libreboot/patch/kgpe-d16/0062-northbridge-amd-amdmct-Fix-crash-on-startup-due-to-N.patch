From 136ca22907a8f16c8cce4d05a208ded2f2f054ac Mon Sep 17 00:00:00 2001
From: Timothy Pearson <tpearson@raptorengineeringinc.com>
Date: Sat, 20 Jun 2015 14:40:56 -0500
Subject: [PATCH 062/139] northbridge/amd/amdmct: Fix crash on startup due to
 NULL pointer access

Change-Id: I47089f2ad886a6fda4e0cd4472efd975bb8e06c5
Signed-off-by: Timothy Pearson <tpearson@raptorengineeringinc.com>
---
 src/northbridge/amd/amdmct/wrappers/mcti_d.c | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/src/northbridge/amd/amdmct/wrappers/mcti_d.c b/src/northbridge/amd/amdmct/wrappers/mcti_d.c
index 0a31aad..ce2329d 100644
--- a/src/northbridge/amd/amdmct/wrappers/mcti_d.c
+++ b/src/northbridge/amd/amdmct/wrappers/mcti_d.c
@@ -353,11 +353,10 @@ static void mctGet_MaxLoadFreq(struct DCTStatStruc *pDCTstat)
 #endif
 
 	for (i = 0; i < 2; i++) {
-		sDCTStruct *pDCTData = pDCTstat->C_DCTPtr[i];
 		highest_rank_count[i] = 0x0;
 		for (dimm = 0; dimm < MAX_DIMMS_SUPPORTED; dimm++) {
-			if (pDCTData->DimmRanks[dimm] > highest_rank_count[i])
-				highest_rank_count[i] = pDCTData->DimmRanks[dimm];
+			if (pDCTstat->DimmRanks[dimm] > highest_rank_count[i])
+				highest_rank_count[i] = pDCTstat->DimmRanks[dimm];
 		}
 	}
 
-- 
1.9.1

