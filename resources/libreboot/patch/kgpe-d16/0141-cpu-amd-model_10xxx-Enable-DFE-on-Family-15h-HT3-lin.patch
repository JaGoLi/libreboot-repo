From c8c36ead5561c661604bd2e141be91091a6e8a99 Mon Sep 17 00:00:00 2001
From: Timothy Pearson <kb9vqf@pearsoncomputing.net>
Date: Sun, 13 Sep 2015 15:54:32 -0500
Subject: [PATCH 141/146] cpu/amd/model_10xxx: Enable DFE on Family 15h HT3
 links

---
 src/cpu/amd/model_10xxx/defaults.h  |    8 ++++++++
 src/cpu/amd/model_10xxx/init_cpus.c |    2 +-
 2 files changed, 9 insertions(+), 1 deletion(-)

diff --git a/src/cpu/amd/model_10xxx/defaults.h b/src/cpu/amd/model_10xxx/defaults.h
index 7a84fcb..b906866 100644
--- a/src/cpu/amd/model_10xxx/defaults.h
+++ b/src/cpu/amd/model_10xxx/defaults.h
@@ -857,4 +857,12 @@ static const struct {
 	{ 0xC0, AMD_FAM15_ALL, AMD_PTYPE_ALL, HTPHY_LINKTYPE_ALL,
 	  0x40040000, 0xe01F0000 },	/* [31:29] RttCtl = 02h,
 					   [20:16] RttIndex = 04h */
+
+	{ 0xc4, AMD_FAM15_ALL, AMD_PTYPE_ALL, HTPHY_LINKTYPE_HT3,
+	  0x00013480, 0x0003fc80 },	/* [17:10] DCV = 0x4d,
+					       [7] DfeEn = 0x1 */
+
+	{ 0xd4, AMD_FAM15_ALL, AMD_PTYPE_ALL, HTPHY_LINKTYPE_HT3,
+	  0x00013480, 0x0003fc80 },     /* [17:10] DCV = 0x4d,
+					       [7] DfeEn = 0x1 */
 };
diff --git a/src/cpu/amd/model_10xxx/init_cpus.c b/src/cpu/amd/model_10xxx/init_cpus.c
index 0604ef8..2c106fe 100644
--- a/src/cpu/amd/model_10xxx/init_cpus.c
+++ b/src/cpu/amd/model_10xxx/init_cpus.c
@@ -1186,7 +1186,7 @@ static void cpuSetAMDPCI(u8 node)
 		/* Check for dual node capability */
 		if (f3xe8 & 0x20000000)
 			dual_node = 1;
-		
+
 		/* Determine the number of active compute units on this node */
 		f5x80 = pci_read_config32(NODE_PCI(node, 5), 0x80);
 		cu_enabled = f5x80 & 0xf;
-- 
1.7.9.5

