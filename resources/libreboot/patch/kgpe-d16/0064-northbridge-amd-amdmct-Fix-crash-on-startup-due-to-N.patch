From 05a000dc3aaf0f156962d0247fa464f4bfb065e9 Mon Sep 17 00:00:00 2001
From: Timothy Pearson <kb9vqf@pearsoncomputing.net>
Date: Sat, 20 Jun 2015 14:40:56 -0500
Subject: [PATCH 064/146] northbridge/amd/amdmct: Fix crash on startup due to
 NULL pointer access

---
 src/northbridge/amd/amdmct/wrappers/mcti_d.c |    5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/src/northbridge/amd/amdmct/wrappers/mcti_d.c b/src/northbridge/amd/amdmct/wrappers/mcti_d.c
index d1da07b..2376b20 100644
--- a/src/northbridge/amd/amdmct/wrappers/mcti_d.c
+++ b/src/northbridge/amd/amdmct/wrappers/mcti_d.c
@@ -353,11 +353,10 @@ static void mctGet_MaxLoadFreq(struct DCTStatStruc *pDCTstat)
 #endif
 
 	for (i = 0; i < 2; i++) {
-		sDCTStruct *pDCTData = pDCTstat->C_DCTPtr[i];
 		highest_rank_count[i] = 0x0;
 		for (dimm = 0; dimm < MAX_DIMMS_SUPPORTED; dimm++) {
-			if (pDCTData->DimmRanks[dimm] > highest_rank_count[i])
-				highest_rank_count[i] = pDCTData->DimmRanks[dimm];
+			if (pDCTstat->DimmRanks[dimm] > highest_rank_count[i])
+				highest_rank_count[i] = pDCTstat->DimmRanks[dimm];
 		}
 	}
 
-- 
1.7.9.5

