From c104a49921424687b0aacea660582ea3c027024a Mon Sep 17 00:00:00 2001
From: Timothy Pearson <tpearson@raptorengineeringinc.com>
Date: Tue, 24 Nov 2015 14:11:56 -0600
Subject: [PATCH 22/45] southbridge/amd/sb700: Add missing DMA setup step from
 AMD RRG

Signed-off-by: Timothy Pearson <tpearson@raptorengineeringinc.com>
---
 src/southbridge/amd/sb700/early_setup.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/src/southbridge/amd/sb700/early_setup.c b/src/southbridge/amd/sb700/early_setup.c
index 06c6c77..544447e 100644
--- a/src/southbridge/amd/sb700/early_setup.c
+++ b/src/southbridge/amd/sb700/early_setup.c
@@ -420,6 +420,11 @@ static void sb700_devices_por_init(void)
 	/* Legacy DMA Prefetch Enhancement, CIM masked it. */
 	/* pci_write_config8(dev, 0x43, 0x1); */
 
+	/* Enable DMA verify bugfix */
+	byte = pci_read_config8(dev, 0x67);
+	byte |= 0x1 << 1;
+	pci_write_config8(dev, 0x67, byte);
+
 	/* Disabling Legacy USB Fast SMI# */
 	byte = pci_read_config8(dev, 0x62);
 	byte |= 0x24;
-- 
2.1.4

