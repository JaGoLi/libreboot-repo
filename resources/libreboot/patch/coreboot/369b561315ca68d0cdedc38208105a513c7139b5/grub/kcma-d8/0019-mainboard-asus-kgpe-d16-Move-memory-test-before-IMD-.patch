From b4b1b5269981dd559ef30efea8025e76e8c0a7ba Mon Sep 17 00:00:00 2001
From: Timothy Pearson <tpearson@raptorengineeringinc.com>
Date: Tue, 24 Nov 2015 14:11:54 -0600
Subject: [PATCH 19/45] mainboard/asus/kgpe-d16: Move memory test before IMD
 setup

Signed-off-by: Timothy Pearson <tpearson@raptorengineeringinc.com>
---
 src/mainboard/asus/kgpe-d16/romstage.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/src/mainboard/asus/kgpe-d16/romstage.c b/src/mainboard/asus/kgpe-d16/romstage.c
index 09de4b5..20ba6f2 100644
--- a/src/mainboard/asus/kgpe-d16/romstage.c
+++ b/src/mainboard/asus/kgpe-d16/romstage.c
@@ -541,6 +541,10 @@ void cache_as_ram_main(unsigned long bist, unsigned long cpu_init_detectedx)
 	raminit_amdmct(sysinfo);
 	timestamp_add_now(TS_AFTER_INITRAM);
 
+#ifdef TEST_MEMORY
+	execute_memory_test();
+#endif
+
 #if !IS_ENABLED(CONFIG_LATE_CBMEM_INIT)
 	if (s3resume)
 		cbmem_initialize();
@@ -565,10 +569,6 @@ void cache_as_ram_main(unsigned long bist, unsigned long cpu_init_detectedx)
 
 	timestamp_add_now(TS_END_ROMSTAGE);
 
-#ifdef TEST_MEMORY
-	execute_memory_test();
-#endif
-
 	post_cache_as_ram();	// BSP switch stack to ram, copy then execute LB.
 	post_code(0x43);	// Should never see this post code.
 }
-- 
2.1.4

