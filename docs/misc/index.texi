\input texinfo
@documentencoding UTF-8

@ifnottex
@paragraphindent 0
@end ifnottex
@titlepage
@title Miscellaneous
@end titlepage

@node Top
@top Miscellaneous

@menu
* Miscellaneous::
* High Pitched Whining Noise on Idle how to remove in Trisquel 7::
* High Pitched Whining Noise on Idle how to remove in Parabola::
* X60/T60 Serial port - how to use for dock owners::
* Power Management Beeps on Thinkpads::
* Get EDID Find out the name model of your LCD panel::
@end menu

@node Miscellaneous
@chapter Miscellaneous
@anchor{#miscellaneous}
Or @uref{../index.html,Back to main index}.

@itemize
@item
@ref{#trisquel7_powertop,High Pitched Whining Noise on Idle (how to remove in Trisquel 7)}
@item
@ref{#high_pitch_parabola,High Pitched Whining Noise on Idle (how to remove in Parabola)}
@item
@ref{#serial,X60/T60: Serial port - how to use (for dock owners)}
@item
@ref{#powerbeeps,Power Management Beeps on Thinkpads}
@item
@uref{patch.html,Using diff and patch}
@item
@ref{#get_edid_panelname,Get EDID: Find out the name (model) of your LCD panel}
@end itemize

@node High Pitched Whining Noise on Idle how to remove in Trisquel 7
@chapter High Pitched Whining Noise on Idle (how to remove in Trisquel 7)
@anchor{#high-pitched-whining-noise-on-idle-how-to-remove-in-trisquel-7}
@menu
* Start powertop automatically at boot time::
@end menu

@node Start powertop automatically at boot time
@section Start powertop automatically at boot time
@anchor{#start-powertop-automatically-at-boot-time}
Included with libreboot is a script called 'powertop.trisquel7'. Run this as root and it will setup powertop to run with --auto-tune at boot time. Load the file in your text editor to see how it does that.

$ @strong{sudo ./resources/scripts/misc/powertop.trisquel7}

Might want to run with --calibrate first

If powertop doesn't work, another way (reduces battery life slightly) is to add @emph{processor.max_cstate=2} to the @emph{linux} line in grub.cfg, using @uref{../gnulinux/grub_cbfs.html,this guide}.

@ref{#pagetop,Back to top of page}

@node High Pitched Whining Noise on Idle how to remove in Parabola
@chapter High Pitched Whining Noise on Idle (how to remove in Parabola)
@anchor{#high-pitched-whining-noise-on-idle-how-to-remove-in-parabola}
The following removes most of the noise. It reduces what is a high frequency whine (that not everyone can hear) to a slight buzz (which most people can't hear or doesn't bother most people).

This is not perfect! The full solution is still not discovered but this is a step towards that. Also, in some instances you will need to run 'sudo powertop --auto-tune' again. This needs to be implemented properly in coreboot itself!

On the X60 with coreboot or libreboot, there is a high pitched sound when idle. So far we have use processor.max_cstate=2 or idle=halt in GRUB. These consume power. Stop using them!

Be root@* @strong{$ su -}

Installed powertop:@* @strong{# pacman -S powertop}

and added the following to /etc/systemd/system/powertop.service :

@verbatim
[Unit]
Description=Powertop tunings

[Service]
Type=oneshot
RemainAfterExit=no
ExecStart=/usr/bin/powertop --auto-tune
# "powertop --auto-tune" still needs a terminal for some reason. Possibly a bug?
Environment="TERM=xterm"

[Install]
WantedBy=multi-user.target
@end verbatim

Finally, as root do that:@* @strong{# systemctl enable powertop}@* @strong{# systemctl start powertop}

The next time you boot the system, the buzz will be gone.

Might want to run with --calibrate first

If powertop doesn't work, another way (reduces battery life slightly) is to add @emph{processor.max_cstate=2} to the @emph{linux} line in grub.cfg, using @uref{../gnulinux/grub_cbfs.html,this guide}.

@ref{#pagetop,Back to top of page}

@node X60/T60 Serial port - how to use for dock owners
@chapter X60/T60: Serial port - how to use (for dock owners)
@anchor{#x60t60-serial-port---how-to-use-for-dock-owners}
For the Thinkpad X60 you can use the @strong{"UltraBase X6"} dock (for the X60 Tablet it is called X6 Tablet UltraBase). For the ThinkPad T60, you can use the @strong{"Advanced Mini Dock"}.

If you are using one of the ROM images with 'serial' in the name, then you have serial port enabled in libreboot and you have memtest86+ included inside the ROM. Connect your null modem cable to the serial port on the dock and connect the other end to a 2nd system using your USB Serial adapter.

On the 2nd system, you can try this (using GNU Screen):@* @strong{$ sudo screen /dev/ttyUSB0 115200}

How to quit GNU Screen: Ctrl+A then release and press K, and then press Y.

There are also others like Minicom but I like GNU Screen

By doing this before booting the X60/T60, you will see console output from libreboot. You will also see GRUB displaying on the serial output, and you will be able to see MemTest86+ on the serial output aswell. You can also configure your distro so that a terminal (TTY) is accessible from the serial console.

The following guide is for Ubuntu, and can be followed for Trisquel 6.0 which is based on Ubuntu 12.04 (should also work in Trisquel 7, based on Ubuntu 14.04) to enable a serial console using GeTTY:@* @uref{https://help.ubuntu.com/community/SerialConsoleHowto,https://help.ubuntu.com/community/SerialConsoleHowto}

Note: part of the tutorial above requires changing your grub.cfg. Just change the @strong{linux} line to add instructions for enabling getty. See @uref{../gnulinux/grub_cbfs.html,../gnulinux/grub_cbfs.html}.

@ref{#pagetop,Back to top of page}

@node Power Management Beeps on Thinkpads
@chapter Power Management Beeps on Thinkpads
@anchor{#power-management-beeps-on-thinkpads}
When disconnecting or connecting the charger, a beep occurs. When the battery goes to a critically low charge level, a beep occurs. Nvramtool is included in libreboot, and can be used to enable or disable this behaviour.

Disable or enable beeps when removing/adding the charger:@* $ @strong{sudo ./nvramtool -w power_management_beeps=Enable}@* $ @strong{sudo ./nvramtool -w power_management_beeps=Disable}

Disable or enable beeps when battery is low:@* $ @strong{sudo ./nvramtool -w low_battery_beep=Enable}@* $ @strong{sudo ./nvramtool -w low_battery_beep=Disable}

A reboot is required, for these changes to take effect.

@node Get EDID Find out the name model of your LCD panel
@chapter Get EDID: Find out the name (model) of your LCD panel
@anchor{#get-edid-find-out-the-name-model-of-your-lcd-panel}
Get the panel name with @strong{sudo get-edid | strings}@* Or look in @strong{/sys/class/drm/card0-LVDS-1/edid}

Alternatively you can use i2cdump. In Trisquel, this is in the package i2c-tools.@* $ @strong{sudo modprobe i2c-dev}@* $ @strong{sudo i2cdump -y 5 0x50} (you might have to change the value for -y)@* $ @strong{sudo rmmod i2c-dev}@* You'll see the panel name in the output (from the EDID dump).

If neither of these options work (or they are unavailable), physically removing the LCD panel is an option. Usually, there will be information printed on the back.

@ref{#pagetop,Back to top of page.}

Copyright Â© 2014, 2015 Francis Rowe <info@@gluglug.org.uk>@* Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts. A copy of the license can be found at @uref{../gfdl-1.3.txt,../gfdl-1.3.txt}

Updated versions of the license (when available) can be found at @uref{https://www.gnu.org/licenses/licenses.html,https://www.gnu.org/licenses/licenses.html}

UNLESS OTHERWISE SEPARATELY UNDERTAKEN BY THE LICENSOR, TO THE EXTENT POSSIBLE, THE LICENSOR OFFERS THE LICENSED MATERIAL AS-IS AND AS-AVAILABLE, AND MAKES NO REPRESENTATIONS OR WARRANTIES OF ANY KIND CONCERNING THE LICENSED MATERIAL, WHETHER EXPRESS, IMPLIED, STATUTORY, OR OTHER. THIS INCLUDES, WITHOUT LIMITATION, WARRANTIES OF TITLE, MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, NON-INFRINGEMENT, ABSENCE OF LATENT OR OTHER DEFECTS, ACCURACY, OR THE PRESENCE OR ABSENCE OF ERRORS, WHETHER OR NOT KNOWN OR DISCOVERABLE. WHERE DISCLAIMERS OF WARRANTIES ARE NOT ALLOWED IN FULL OR IN PART, THIS DISCLAIMER MAY NOT APPLY TO YOU.

TO THE EXTENT POSSIBLE, IN NO EVENT WILL THE LICENSOR BE LIABLE TO YOU ON ANY LEGAL THEORY (INCLUDING, WITHOUT LIMITATION, NEGLIGENCE) OR OTHERWISE FOR ANY DIRECT, SPECIAL, INDIRECT, INCIDENTAL, CONSEQUENTIAL, PUNITIVE, EXEMPLARY, OR OTHER LOSSES, COSTS, EXPENSES, OR DAMAGES ARISING OUT OF THIS PUBLIC LICENSE OR USE OF THE LICENSED MATERIAL, EVEN IF THE LICENSOR HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH LOSSES, COSTS, EXPENSES, OR DAMAGES. WHERE A LIMITATION OF LIABILITY IS NOT ALLOWED IN FULL OR IN PART, THIS LIMITATION MAY NOT APPLY TO YOU.

The disclaimer of warranties and limitation of liability provided above shall be interpreted in a manner that, to the extent possible, most closely approximates an absolute disclaimer and waiver of all liability.

@bye
